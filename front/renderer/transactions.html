<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transactions - Inventory System</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="container dashboard-container">
    <!-- Header -->
    <div class="dashboard-header">
        <div class="header-left">
            <h1>üí∞ Transactions</h1>
            <p class="welcome-text">Record sales and purchases</p>
        </div>
        <div class="header-right">
            <span class="connection-status" id="connection-status">üü¢ Connected</span>
            <button class="btn btn-secondary" onclick="window.location.href='dashboard.html'">
                ‚Üê Dashboard
            </button>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="dashboard-nav">
        <button class="nav-item" onclick="window.location.href='dashboard.html'">
            üìä Overview
        </button>
        <button class="nav-item" onclick="window.location.href='products.html'">
            üì¶ Products
        </button>
        <button class="nav-item" onclick="window.location.href='suppliers.html'">
            üè™ Suppliers
        </button>
        <button class="nav-item active">
            üí∞ Transactions
        </button>
        <button class="nav-item" onclick="window.location.href='reports.html'">
            üìà Reports
        </button>
    </nav>

    <!-- Quick Stats -->
    <div class="stats-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
        <div class="stat-card">
            <div class="stat-icon">üì•</div>
            <div class="stat-info">
                <h3 id="total-sales">0</h3>
                <p>Total Sales Today</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üì§</div>
            <div class="stat-info">
                <h3 id="total-purchases">0</h3>
                <p>Total Purchases Today</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üíµ</div>
            <div class="stat-info">
                <h3 id="revenue-today">0 UZS</h3>
                <p>Revenue Today</p>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="section">
        <!-- Toolbar -->
        <div class="toolbar">
            <div class="filter-group">
                <select id="type-filter">
                    <option value="">All Types</option>
                    <option value="Sale">Sales</option>
                    <option value="Purchase">Purchases</option>
                </select>
                <select id="date-filter">
                    <option value="today">Today</option>
                    <option value="week">This Week</option>
                    <option value="month">This Month</option>
                    <option value="all">All Time</option>
                </select>
            </div>
            <div class="section-actions">
                <button class="btn btn-success" id="new-sale-btn">
                    üíµ New Sale
                </button>
                <button class="btn btn-warning" id="new-purchase-btn">
                    üì¶ New Purchase
                </button>
            </div>
        </div>

        <!-- Transactions Table -->
        <div class="table-container">
            <table class="data-table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Type</th>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Unit Price</th>
                    <th>Total Price</th>
                    <th>User</th>
                    <th>Date</th>
                    <th>Notes</th>
                </tr>
                </thead>
                <tbody id="transactions-table-body">
                <tr>
                    <td colspan="9" class="text-center">
                        <div class="loading">Loading transactions...</div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Transaction Modal -->
<div id="transaction-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modal-title">New Sale</h2>
            <button class="modal-close" onclick="closeTransactionModal()">√ó</button>
        </div>
        <div class="modal-body">
            <form id="transaction-form">
                <input type="hidden" id="transaction-type">

                <div class="form-group">
                    <label for="transaction-product">Product *</label>
                    <select id="transaction-product" class="form-control" required>
                        <option value="">Select product</option>
                    </select>
                    <small id="current-stock" class="text-muted"></small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="transaction-quantity">Quantity *</label>
                        <input
                                type="number"
                                id="transaction-quantity"
                                class="form-control"
                                required
                                min="1"
                                value="1"
                        >
                    </div>
                    <div class="form-group">
                        <label for="transaction-price">Unit Price (UZS) *</label>
                        <input
                                type="number"
                                id="transaction-price"
                                class="form-control"
                                required
                                min="0"
                                step="0.01"
                                readonly
                        >
                    </div>
                </div>

                <div class="form-group">
                    <label for="transaction-total">Total Price (UZS)</label>
                    <input
                            type="text"
                            id="transaction-total"
                            class="form-control"
                            readonly
                            style="font-size: 18px; font-weight: bold; background: #f3f4f6;"
                    >
                </div>

                <div class="form-group">
                    <label for="transaction-notes">Notes</label>
                    <textarea
                            id="transaction-notes"
                            class="form-control"
                            placeholder="Add any notes or comments"
                            rows="3"
                    ></textarea>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeTransactionModal()">
                Cancel
            </button>
            <button class="btn btn-success" id="save-transaction-btn">
                Complete Transaction
            </button>
        </div>
    </div>
</div>

<script src="js/socket-client.js"></script>
<script src="js/transactions.js"></script>
</body>
</html>